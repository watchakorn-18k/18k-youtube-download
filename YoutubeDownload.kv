# -*- coding: utf-8 -*-
gridlayout_Screen:

#:import Clipboard kivy.core.clipboard.Clipboard
#:import hex kivy.utils.get_color_from_hex
#:import threading threading
#:import webbrowser webbrowser
#:set font_text 'font/TF_PHETHAI.ttf'
#:set font_text_mini 'font/thaisanslite_r1.ttf'

<gridlayout_Screen>:
    canvas.before:
        Color:
            rgba: hex('#252022')
        Rectangle:
            pos: self.pos
            size: self.size
    cols: 1
    padding: 20
    
    # Image:
    #     size_hint: 0.1, None
    #     source: 'logo.png'
    #     size: '300dp','300dp'
    Label:
        text:''
    BoxLayout:
        orientation: 'horizontal'
        
        Label:
            text:''
        Button:
            id: btn_1
            on_release: threading.Thread(target=root.animate_it).start()
            size_hint: 2, 3
            pos_hint: {'center_x': 1, 'center_y': 0.5}
            background_normal: 'logo.png'
            background_down: 'logo_disabled.png'
            font_size: '45sp'
            font_name: font_text
            on_press: threading.Thread(target=root.on_open_dir_mp3).start()
        Label:
            text:''
    Label:
        text:''
    RightClickTextInput:
        id: my_text_input
        text: ""
        size_hint: .1, None
        height: 30
        width: 50
        font_size:'15sp'
        multiline: False
        use_bubble: True
        font_name: font_text_mini
    Button:
        id: my_button_1
        text:'ดาวน์โหลดเป็น MP3'
        size_hint: 0.1, None
        on_release: threading.Thread(target=root.on_button_click).start()
        font_name: font_text_mini
        font_size: '20sp'
        height: "50dp"
        background_color: '#54c6ff'
        background_normal: '#54c6f0'
        
        canvas.before:
            Color:
                rgba: hex('#333333')
        disabled: True if my_text_input.text == '' else False
    Label:
        text:''

    BoxLayout:
        orientation:'horizontal'
        AsyncImage:
            id: image_youtube
            source: 'blank.png'
            anim_delay: 0.1
            size_hint: None,None
            size: '140dp','300dp'
            pos_hint: {'x':-1, 'y':-2.2}
        Label:
            id: title_youtube
            text:''
            size_hint:None,None
            pos_hint: {'y': -0.5}
            font_name: font_text
            font_size: '15sp'
            text_size:self.size
            halign: 'right'
            valign:"top"
        Label:
            id: duration_youtube
            text:''
            size_hint:None,None
            pos_hint: {'y': -0.5}
            font_name: font_text
            font_size: '15sp'
            text_size:self.size
            halign: 'right'
            valign:"top"
    Button:
        id: copy_link
        text:'คัดลอกลิงก์'
        font_name: font_text
        size_hint: None,None
        size_hint_x: 1
        size_hint_y: 0.4
        text_size:self.size
        valign:"middle"
        halign: 'center'
        background_color: '#e89002'
        background_normal: '#a37d15'
        value: "18K"
        on_release:
            Clipboard.copy(copy_link.value)
            my_text_input.text = copy_link.value
        
            

    Label:
        text: 'ใส่ลิงก์ลงในช่องว่าง' if my_text_input.text == '' else 'เพลงล่าสุดที่ดาวน์โหลด'
        font_name: font_text_mini if my_text_input.text == '' else font_text
        font_size: '40sp' if my_text_input.text == '' else '40sp'
        color: hex('#ffbb00') if my_text_input.text == '' else hex('#ffbb00')
    Label:
        id: label_youtube
        text:root.my_text
        font_name: font_text
        font_size: '23sp'
    Label:
        text: "" if root.process_download == '' else root.process_download
        font_name: font_text
        font_size: '20sp'
        color: hex('#00ff00') if root.process_download == "ดาวน์โหลดเสร็จแล้ว" else hex('#ffbb00')

    ProgressBar:
        id: my_progress_bar
        max:100
        value: 0
    Button:
        text:'ตรวจเวอร์ซอฟต์แวร์เวอร์ชั่นล่าสุด'
        font_name: font_text_mini
        font_size: '15sp'
        pos: '10dp','10dp'
        size_hint: 0.1, 0.5
        background_color: '#ffbb00'
        background_normal: '#a37d15'
        on_release: webbrowser.open('https://github.com/watchakorn-18k/Python-download-YT-MP3/releases/')
    Label:
        text:'Dev. Wk-18K version 2.1'
        font_name: font_text_mini
        font_size: '15sp'
        pos: '10dp','10dp'
        size_hint: 0.1, 0.5


<RightClickTextInput>:
    